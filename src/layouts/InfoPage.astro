---
import "~styles/global.css";
import Header from "~components/Header/Header.astro";
import Drawer from "~components/Header/Drawer.astro";

interface Props {
    title?: string;
}

const { title }: Props = Astro.props;

// Cirlces
import GradientCircle from "~components/GradientCircle.astro";
import Gradient from "javascript-color-gradient";
import type { HexColor } from "types";
import Waves from "~components/Waves.astro";

// Define gradient startColor and endColor, and circleEndColor
const circleIncreasePx: number = 175;
const endColor: HexColor = "#3B1C77"; // This color is used for gradient end color in a circle

/*
    Generate gradient colors for circles, and define circle size increase in pixels
    000113 -> dark background
    ad55e7 -> accent color
*/
let gradientArray = new Gradient().setColorGradient("#000005", "#ad55e7").setMidpoint(10).getColors() as HexColor[];
gradientArray = gradientArray.reverse();
---

<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        {title && <title>{title}</title>}
        <slot name="head" />
    </head>
    <body class="bg-background">
        <!-- Navigation bar -->
        <Header iconName="menu" showBurger={true} />
        <!-- Render circles -->
        <div class="fixed w-full h-full top-0 left-0 z-[-1] max-md:hidden">
            <div
                class="w-[200px] rounded-full aspect-square bg-gray-700 absolute top-1/2 -translate-y-1/2 -translate-x-1/2 grid place-items-center"
            >
                <!-- Check for overflow, and do not allow it -->
                {
                    gradientArray.map((startColor, idx) => (
                        <GradientCircle
                            w={`${circleIncreasePx * (idx + 1)}px`}
                            h={`${circleIncreasePx * (idx + 1)}px`}
                            zIndex={(idx + 1) * -1}
                            startColor={startColor}
                            endColor={endColor}
                            deg="-22.5deg"
                        />
                    ))
                }
            </div>
        </div>
        <!-- Children  -->
        <slot />

        <!-- Phone waves -->
        <div class="fixed bottom-0 w-screen md:hidden">
            <div class="w-full h-full absolute backdrop-blur-sm bg-background-opacity"></div>
            <Waves className="w-full" />
        </div>
        <Drawer />
    </body>
</html>

<style>
    body,
    html {
        margin: 0;
    }
</style>
